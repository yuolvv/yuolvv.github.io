<!DOCTYPE html>
<html>
  
<head>
  <meta charset="utf-8">
  <meta name="author" content="听风行" />
  
  
  <title>SpringBoot源码分析(10)-SpringBoot的内置生命周期事件 | 听风行</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Java,Java,SpringBoot,Source," />
  

  
  <meta name="description" content="&amp;emsp;&amp;emsp; 记录SpringBoot的源码分析过程-SpringBoot的内置生命周期事件">

  

  
    <script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.11.1/dist/av-min.js" async></script>
  

  
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
  

  
    <script src="//unpkg.com/valine/dist/Valine.min.js" async></script>
  

  

  <script>
  // theme-ad's config script
  // it can be used in every script
  
  window.AD_CONFIG = {
    leancloud: {"appid":"JUB4uWwzKVKwbNzwRvkxgw9F-gzGzoHsz","appkey":"tLtzj0dg7LQTGu9dEY57RYef","comment":true,"count":true},
    welcome: {"enable":true,"interval":30},
    start_time: "2015-07-01",
    passwords: ["383060d16dbbd03a8df851cdc6f513f7fdf4dadd8ae0dc62ae87151f537ec38c", ],
    is_post: true,
    lock: false,
    author: "听风行",
    share: {"twitter":true,"facebook":true,"weibo":true,"qq":true,"wechat":true},
    mathjax: true,
    page_type: "",
    root: "/"
  };
</script>

  
<script src="/vendor/sha256.min.js"></script>
<script src="/js/auth.js"></script>
<script src="/js/index.js"></script>
<script src="/vendor/qrcode.min.js"></script>


  
    <link rel="icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/favicon.ico">
  

  <link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  
<link rel="stylesheet" href="/css/index.css">
<link rel="stylesheet" href="/styles/components/highlight/highlight.css">


  
<meta name="generator" content="Hexo 5.2.0"></head>
  <body>
    <header class="site-header">
  <div class="site-header-brand">
    
      <span class="site-header-brand-title">
        <a href="/">听风行</a>
      </span>
    
    
      <span class="site-header-brand-motto"> | 虽千万人吾往矣</span>
    
  </div>
  <div class="site-header-right">
    <nav class="site-header-navigation">
      
        <a href="/" target="_self">首页</a>
      
        <a href="/archives/" target="_self">归档</a>
      
        <a href="/tags/" target="_self">标签</a>
      
        <a href="/categories/" target="_self">分类</a>
      
        <a href="/friends/" target="_self">友链</a>
      
        <a href="/about/" target="_self">关于</a>
      
    </nav>
    <div class="site-header-btn">
      
        <a href="https://github.com/yuolvv/" target="_blank" id="site-github">
          <i class="fa fa-github-alt"></i>
        </a>
      
      <a href="javascript:void(0);" id="site-search">
        <i class="fa fa-search"></i>
      </a>
      <a href="javascript:void(0);" id="site-nav-btn">
        <i class="fa fa-ellipsis-v"></i>
      </a>
    </div>
  </div>
</header>
<nav class="table-content" id="site-nav">
  <div class="table-content-title">
    <span>导航</span>
  </div>
  <div class="table-content-main">
    <ol class="toc">
      
        <li class="toc-item">
          <a href="/" target="_self">
            首页
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/archives/" target="_self">
            归档
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/tags/" target="_self">
            标签
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/categories/" target="_self">
            分类
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/friends/" target="_self">
            友链
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/about/" target="_self">
            关于
          </a>
        </li>
      
    </ol>
  </div>
</nav>
<div id="site-process"></div>
    <main>
      
  <div class="passage">
  <div class="passage-meta">
    <span>
      <i class="fa fa-calendar"></i>2020-11-24
    </span>
    
      <span>
        | <a href="/categories/Java/"><i class="fa fa-bookmark"></i>Java</a>
      </span>
    
    
      <span>
        | <i class="fa fa-unlock-alt"></i>Unlock
      </span>
    
  </div>
  <h1 class="passage-title">
    SpringBoot源码分析(10)-SpringBoot的内置生命周期事件
  </h1>
  
    <div class="passage-cover">
      <figure style="background-image:url(https://cn.bing.com/th?id=OHR.NaturesWindowLookout_ZH-CN1799883608_1920x1080.jpg);"></figure>
    </div>
  

  

  <article class="passage-article">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-2795125801721613"
        data-ad-slot="7468094198"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <p>上一篇分析了<strong>SpringBoot启动时广播生命周期事件的原理</strong>，关键步骤总结：</p>
<ol>
<li>为广播SpringBoot内置生命周期事件做前期准备：<br> 1）首先加载<code>ApplicationListener</code>监听器实现类；<br> 2）其次加载SPI扩展类<code>EventPublishingRunListener</code>。</li>
<li>SpringBoot启动时利用<code>EventPublishingRunListener</code>广播生命周期事件，然后<code>ApplicationListener</code>监听器实现类监听相应的生命周期事件执行一些初始化逻辑的工作。</li>
</ol>
<h1 id="1-SpringBoot生命周期事件源码分析"><a href="#1-SpringBoot生命周期事件源码分析" class="headerlink" title="1.SpringBoot生命周期事件源码分析"></a>1.SpringBoot生命周期事件源码分析</h1><p>SpringBoot的生命周期事件，类结构图：</p>
<p><img src="https://i.loli.net/2020/12/02/rjMo2PnDpETzvam.png" alt="sb28.png"></p>
<p>由上图可以看到事件类之间的关系：</p>
<ol>
<li>最顶级的父类是JDK的事件基类<code>EventObject</code>；</li>
<li>然后Spring的事件基类<code>ApplicationEvent</code>继承了JDK的事件基类<code>EventObject</code>；</li>
<li>其次SpringBoot的生命周期事件基类<code>SpringApplicationEvent</code>继承了Spring的事件基类<code>ApplicationEvent</code>；</li>
<li>最后SpringBoot具体的7个生命周期事件类再继承了SpringBoot的生命周期事件基类<code>SpringApplicationEvent</code>。</li>
</ol>
<h2 id="1-1-JDK的事件基类EventObject"><a href="#1-1-JDK的事件基类EventObject" class="headerlink" title="1.1 JDK的事件基类EventObject"></a>1.1 JDK的事件基类EventObject</h2><p><code>EventObject</code>类是JDK的事件基类，是所有Java事件类的基本，即所有的Java事件类都直接或间接继承于该类，源码如下：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> EventObject <span class="keyword">implements</span> java.io.Serializable &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">5516075349620653480</span>L;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The object on which the Event initially occurred.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">transient</span> Object  <span class="keyword">source</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Constructs a prototypical Event.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param    source    The object on which the Event initially occurred.</span></span><br><span class="line"><span class="comment">     * @exception  IllegalArgumentException  if source is null.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> EventObject(Object <span class="keyword">source</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">source</span> == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;null source&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.<span class="keyword">source</span> = <span class="keyword">source</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The object on which the Event initially occurred.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return   The object on which the Event initially occurred.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object getSource() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">source</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a String representation of this EventObject.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return  A a String representation of this EventObject.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> getClass().getName() + <span class="string">&quot;[source=&quot;</span> + <span class="keyword">source</span> + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到<code>EventObject</code>类只有一个属性<code>source</code>，这个属性是用来记录最初事件是发生在哪个类。</p>
<p>比如在SpringBoot启动过程中会触发<code>ApplicationStartingEvent</code>事件，而这个事件最初是在<code>SpringApplication</code>类中触发的，因此<code>source</code>就是<code>SpringApplication</code>对象。</p>
<h2 id="1-2-Spring的事件基类ApplicationEvent"><a href="#1-2-Spring的事件基类ApplicationEvent" class="headerlink" title="1.2 Spring的事件基类ApplicationEvent"></a>1.2 Spring的事件基类ApplicationEvent</h2><p><code>ApplicationEvent</code>继承了JDK的事件基类<code>EventObject</code>类，是Spring的事件基类，被所有Spring的具体事件类继承，源码如下：</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationEvent</span> <span class="keyword">extends</span> <span class="title">EventObject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** use serialVersionUID from Spring 1.2 for interoperability. */</span></span><br><span class="line">	<span class="keyword">private</span> static <span class="keyword">final</span> long serialVersionUID = <span class="number">7099057708183571937</span>L;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** System time when the event happened. */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> long timestamp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a new ApplicationEvent.</span></span><br><span class="line"><span class="comment">	 * @param source the object on which the event initially occurred (never &#123;@code null&#125;)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	public <span class="type">ApplicationEvent</span>(<span class="type">Object</span> source) &#123;</span><br><span class="line">		<span class="keyword">super</span>(source);</span><br><span class="line">		<span class="keyword">this</span>.timestamp = <span class="type">System</span>.currentTimeMillis();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the system time in milliseconds when the event happened.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	public <span class="keyword">final</span> long getTimestamp() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.timestamp;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到<code>ApplicationEvent</code>有且仅有一个属性<code>timestamp</code>，该属性是用来记录事件发生的时间。</p>
<h2 id="1-3-SpringBoot的事件基类SpringApplicationEvent"><a href="#1-3-SpringBoot的事件基类SpringApplicationEvent" class="headerlink" title="1.3 SpringBoot的事件基类SpringApplicationEvent"></a>1.3 SpringBoot的事件基类SpringApplicationEvent</h2><p><code>SpringApplicationEvent</code>类继承了Spring的事件基类<code>ApplicationEvent</code>，是所有SpringBoot内置生命周期事件的父类，源码如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">&quot;serial&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringApplicationEvent</span> <span class="keyword">extends</span> <span class="title">ApplicationEvent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> final <span class="built_in">String</span>[] args;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="title">SpringApplicationEvent</span>(<span class="params">SpringApplication application, <span class="built_in">String</span>[] args</span>)</span> &#123;</span><br><span class="line">		<span class="built_in">super</span>(application);</span><br><span class="line">		<span class="built_in">this</span>.args = args;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> SpringApplication <span class="function"><span class="title">getSpringApplication</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> (SpringApplication) getSource();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> final <span class="built_in">String</span>[] <span class="function"><span class="title">getArgs</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.args;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到<code>SpringApplicationEvent</code>有且仅有一个属性<code>args</code>，该属性就是SpringBoot启动时的命令行参数即标注<code>@SpringBootApplication</code>启动类中<code>main</code>函数的参数。</p>
<h1 id="2-SpringBoot具体的生命周期事件类"><a href="#2-SpringBoot具体的生命周期事件类" class="headerlink" title="2.SpringBoot具体的生命周期事件类"></a>2.SpringBoot具体的生命周期事件类</h1><p>接下来分析一下<code>SpringBoot</code>内置生命周期事件即<code>SpringApplicationEvent</code>的7个具体子类。</p>
<h2 id="2-1-ApplicationStartingEvent"><a href="#2-1-ApplicationStartingEvent" class="headerlink" title="2.1 ApplicationStartingEvent"></a>2.1 ApplicationStartingEvent</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">ApplicationStartingEvent</span> <span class="keyword">extends</span> <span class="title">SpringApplicationEvent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a new &#123;@link ApplicationStartingEvent&#125; instance.</span></span><br><span class="line"><span class="comment">	 * @param application the current application</span></span><br><span class="line"><span class="comment">	 * @param args the arguments the application is running with</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	public <span class="type">ApplicationStartingEvent</span>(<span class="type">SpringApplication</span> application, <span class="type">String</span>[] args) &#123;</span><br><span class="line">		<span class="keyword">super</span>(application, args);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SpringBoot开始启动时便会发布<code>ApplicationStartingEvent</code>事件，其发布时机在环境变量Environment或容器ApplicationContext创建前但在注册<code>ApplicationListener</code>具体监听器之后，标志标志<code>SpringApplication</code>开始启动。</p>
<h2 id="2-2-ApplicationEnvironmentPreparedEvent"><a href="#2-2-ApplicationEnvironmentPreparedEvent" class="headerlink" title="2.2 ApplicationEnvironmentPreparedEvent"></a>2.2 ApplicationEnvironmentPreparedEvent</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationEnvironmentPreparedEvent</span> <span class="keyword">extends</span> <span class="title">SpringApplicationEvent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> final ConfigurableEnvironment environment;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a new &#123;<span class="doctag">@link </span>ApplicationEnvironmentPreparedEvent&#125; instance.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>application the current application</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>args the arguments the application is running with</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>environment the environment that was just created</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ApplicationEnvironmentPreparedEvent(SpringApplication application,</span><br><span class="line">			<span class="built_in">String</span>[] args, ConfigurableEnvironment environment) &#123;</span><br><span class="line">		<span class="built_in">super</span>(application, args);</span><br><span class="line">		<span class="built_in">this</span>.environment = environment;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the environment.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return </span>the environment</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ConfigurableEnvironment <span class="function"><span class="title">getEnvironment</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.environment;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到<code>ApplicationEnvironmentPreparedEvent</code>事件多了一个<code>environment</code>属性，作用是利用事件发布订阅机制，相应监听器可以从<code>ApplicationEnvironmentPreparedEvent</code>事件中取出<code>environment</code>变量，然后可以为<code>environment</code>属性增加属性值或读出<code>environment</code>变量中的值。</p>
<blockquote>
<p><strong>例如：</strong> <code>ConfigFileApplicationListener</code>监听器就是监听了<code>ApplicationEnvironmentPreparedEvent</code>事件，然后取出<code>ApplicationEnvironmentPreparedEvent</code>事件的<code>environment</code>属性，然后再为<code>environment</code>属性增加<code>application.properties</code>配置文件中的环境变量值。</p>
</blockquote>
<p>当SpringApplication已经开始启动且环境变量<code>Environment</code>已经创建后，并且为环境变量<code>Environment</code>配置了命令行和<code>Servlet</code>等类型的环境变量后，此时会发布<code>ApplicationEnvironmentPreparedEvent</code>事件。</p>
<p>监听<code>ApplicationEnvironmentPreparedEvent</code>事件的第一个监听器是<code>ConfigFileApplicationListener</code>，因为是<code>ConfigFileApplicationListener</code>监听器还要为环境变量<code>Environment</code>增加<code>application.properties</code>配置文件中的环境变量；此后还有一些也是监听<code>ApplicationEnvironmentPreparedEvent</code>事件的其他监听器监听到此事件时，此时环境变量<code>Environment</code>几乎已经完全准备好了。</p>
<blockquote>
<p><strong>思考：</strong> 监听同一事件的监听器们执行监听逻辑时是有顺序的，可以想一下这个排序逻辑是什么时候排序的？还有为什么要这样排序呢？</p>
</blockquote>
<h2 id="2-3-ApplicationContextInitializedEvent"><a href="#2-3-ApplicationContextInitializedEvent" class="headerlink" title="2.3 ApplicationContextInitializedEvent"></a>2.3 ApplicationContextInitializedEvent</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationContextInitializedEvent</span> <span class="keyword">extends</span> <span class="title">SpringApplicationEvent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> final ConfigurableApplicationContext context;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a new &#123;<span class="doctag">@link </span>ApplicationContextInitializedEvent&#125; instance.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>application the current application</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>args the arguments the application is running with</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>context the context that has been initialized</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ApplicationContextInitializedEvent(SpringApplication application,</span><br><span class="line">			<span class="built_in">String</span>[] args, ConfigurableApplicationContext context) &#123;</span><br><span class="line">		<span class="built_in">super</span>(application, args);</span><br><span class="line">		<span class="built_in">this</span>.context = context;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the application context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return </span>the context</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ConfigurableApplicationContext <span class="function"><span class="title">getApplicationContext</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.context;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到<code>ApplicationContextInitializedEvent</code>事件多了个<code>ConfigurableApplicationContext</code>类型的<code>context</code>属性，<code>context</code>属性的作用同样是为了相应监听器可以拿到这个<code>context</code>属性执行一些逻辑。</p>
<p><code>ApplicationContextInitializedEvent</code>事件在<code>ApplicationContext</code>容器创建后，且为<code>ApplicationContext</code>容器设置了<code>environment</code>变量和执行了<code>ApplicationContextInitializers</code>的初始化方法后但在bean定义加载前触发，标志ApplicationContext已经初始化完毕。</p>
<blockquote>
<p><strong>扩展：</strong> 可以看到<code>ApplicationContextInitializedEvent</code>是在为<code>context</code>容器配置<code>environment</code>变量后触发，此时<code>ApplicationContextInitializedEvent</code>等事件只要有<code>context</code>容器的话，那么其他需要<code>environment</code>环境变量的监听器只需要从<code>context</code>中取出<code>environment</code>变量即可，从而<code>ApplicationContextInitializedEvent</code>等事件没必要再配置<code>environment</code>属性。</p>
</blockquote>
<h2 id="2-4-ApplicationPreparedEvent"><a href="#2-4-ApplicationPreparedEvent" class="headerlink" title="2.4 ApplicationPreparedEvent"></a>2.4 ApplicationPreparedEvent</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationPreparedEvent</span> <span class="keyword">extends</span> <span class="title">SpringApplicationEvent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> final ConfigurableApplicationContext context;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a new &#123;<span class="doctag">@link </span>ApplicationPreparedEvent&#125; instance.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>application the current application</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>args the arguments the application is running with</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>context the ApplicationContext about to be refreshed</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ApplicationPreparedEvent(SpringApplication application, <span class="built_in">String</span>[] args,</span><br><span class="line">			ConfigurableApplicationContext context) &#123;</span><br><span class="line">		<span class="built_in">super</span>(application, args);</span><br><span class="line">		<span class="built_in">this</span>.context = context;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the application context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return </span>the context</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ConfigurableApplicationContext <span class="function"><span class="title">getApplicationContext</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.context;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样可以看到<code>ApplicationPreparedEvent</code>事件多了个<code>ConfigurableApplicationContext</code>类型的<code>context</code>属性，多了<code>context</code>属性的作用是能让监听该事件的监听器们能拿到<code>context</code>属性，监听器拿到<code>context</code>属性一般有如下作用：</p>
<ol>
<li>从事件中取出<code>context</code>属性，然后可以增加一些后置处理器，比如<code>ConfigFileApplicationListener</code>监听器监听到<code>ApplicationPreparedEvent</code>事件后，然后取出<code>context</code>变量，通过<code>context</code>变量增加了<code>PropertySourceOrderingPostProcessor</code>这个后置处理器；</li>
<li>通过<code>context</code>属性取出<code>beanFactory</code>容器，然后注册一些<code>bean</code>，比如<code>LoggingApplicationListener</code>监听器通过<code>ApplicationPreparedEvent</code>事件的<code>context</code>属性取出<code>beanFactory</code>容器,然后注册了<code>springBootLoggingSystem</code>这个单例<code>bean</code>；</li>
<li>通过<code>context</code>属性取出<code>Environment</code>环境变量，然后就可以操作环境变量，比如<code>PropertiesMigrationListener</code>。</li>
</ol>
<p><code>ApplicationPreparedEvent</code>事件在<code>ApplicationContext</code>容器已经完全准备好时但在容器刷新前触发，在这个阶段<code>bean</code>定义已经加载完毕还有<code>environment</code>已经准备好可以用了。</p>
<h2 id="2-5-ApplicationStartedEvent"><a href="#2-5-ApplicationStartedEvent" class="headerlink" title="2.5 ApplicationStartedEvent"></a>2.5 ApplicationStartedEvent</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationStartedEvent</span> <span class="keyword">extends</span> <span class="title">SpringApplicationEvent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> final ConfigurableApplicationContext context;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a new &#123;<span class="doctag">@link </span>ApplicationStartedEvent&#125; instance.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>application the current application</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>args the arguments the application is running with</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>context the context that was being created</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ApplicationStartedEvent(SpringApplication application, <span class="built_in">String</span>[] args,</span><br><span class="line">			ConfigurableApplicationContext context) &#123;</span><br><span class="line">		<span class="built_in">super</span>(application, args);</span><br><span class="line">		<span class="built_in">this</span>.context = context;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the application context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return </span>the context</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ConfigurableApplicationContext <span class="function"><span class="title">getApplicationContext</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.context;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ApplicationStartedEvent</code>事件将在容器刷新后但<code>ApplicationRunner</code>和<code>CommandLineRunner</code>的<code>run</code>方法执行前触发，标志<code>Spring</code>容器已经刷新，此时容器已经准备完毕了。</p>
<blockquote>
<p><strong>扩展：</strong> 这里提到了<code>ApplicationRunner</code>和<code>CommandLineRunner</code>接口有啥作用呢？一般会在<code>Spring</code>容器刷新完毕后，此时可能有一些系统参数等静态数据需要加载，此时就可以实现了<code>ApplicationRunner</code>或<code>CommandLineRunner</code>接口来实现静态数据的加载。</p>
</blockquote>
<h2 id="2-6-ApplicationReadyEvent"><a href="#2-6-ApplicationReadyEvent" class="headerlink" title="2.6 ApplicationReadyEvent"></a>2.6 ApplicationReadyEvent</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationReadyEvent</span> <span class="keyword">extends</span> <span class="title">SpringApplicationEvent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> final ConfigurableApplicationContext context;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a new &#123;<span class="doctag">@link </span>ApplicationReadyEvent&#125; instance.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>application the current application</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>args the arguments the application is running with</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param </span>context the context that was being created</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ApplicationReadyEvent(SpringApplication application, <span class="built_in">String</span>[] args,</span><br><span class="line">			ConfigurableApplicationContext context) &#123;</span><br><span class="line">		<span class="built_in">super</span>(application, args);</span><br><span class="line">		<span class="built_in">this</span>.context = context;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the application context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return </span>the context</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ConfigurableApplicationContext <span class="function"><span class="title">getApplicationContext</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.context;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>ApplicationReadyEvent</code>事件在调用完<code>ApplicationRunner</code>和<code>CommandLineRunner</code>的<code>run</code>方法后触发，此时标志<code>SpringApplication</code>已经正在运行。</p>
<h2 id="2-7-ApplicationFailedEvent"><a href="#2-7-ApplicationFailedEvent" class="headerlink" title="2.7 ApplicationFailedEvent"></a>2.7 ApplicationFailedEvent</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationFailedEvent</span> <span class="keyword">extends</span> <span class="title">SpringApplicationEvent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> ConfigurableApplicationContext context;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="built_in">Throwable</span> <span class="built_in">exception</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a new &#123;<span class="doctag">@link</span> ApplicationFailedEvent&#125; instance.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> application the current application</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> args the arguments the application was running with</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> context the context that was being created (maybe null)</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> exception the exception that caused the error</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ApplicationFailedEvent(SpringApplication application, <span class="keyword">String</span>[] args,</span><br><span class="line">			ConfigurableApplicationContext context, <span class="built_in">Throwable</span> <span class="built_in">exception</span>) &#123;</span><br><span class="line">		super(application, args);</span><br><span class="line">		this.context = context;</span><br><span class="line">		this.<span class="built_in">exception</span> = <span class="built_in">exception</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the application context.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the context</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> ConfigurableApplicationContext getApplicationContext() &#123;</span><br><span class="line">		<span class="keyword">return</span> this.context;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Return the exception that caused the failure.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the exception</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">Throwable</span> getException() &#123;</span><br><span class="line">		<span class="keyword">return</span> this.<span class="built_in">exception</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到<code>ApplicationFailedEvent</code>事件除了多了一个<code>context</code>属性外，还多了一个<code>Throwable</code>类型的<code>exception</code>属性用来记录SpringBoot启动失败时的异常。</p>
<p><code>ApplicationFailedEvent</code>事件在SpringBoot启动失败时触发，标志SpringBoot启动失败。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>SpringBoot启动过程中要触发的各种生命周期事件</p>
<table>
<thead>
<tr>
<th align="center">发布顺序</th>
<th align="center">时间</th>
<th align="center">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">ApplicationStartingEvent</td>
<td align="center">在SpringApplication启动时，在环境变量Environment或者容器ApplicationContext创建前触发，标志SpringApplication开始启动。</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">ApplicationEnvironmentPreparedEvent</td>
<td align="center">当SpringApplication已经开始启动且环境变量Environment已经准备好时触发，标志环境变量已经准备好。</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">ApplicationContextInitializedEvent</td>
<td align="center">ApplicationContextInitializers的初始化方法已经被调用，即从spring.factories中加载的initializers已经执行ApplicationContext初始化逻辑但在bean定义加载前触发，标志ApplicationContext已经初始化完毕。</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">ApplicationPreparedEvent</td>
<td align="center">在Spring容器刷新refresh前触发</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">ApplicationStartedEvent</td>
<td align="center">在spring容器刷新后触发，但在调用ApplicationRunner和CommandLineRunner的run方法调用前触发，标志spring容器已经刷新，此时所有的bean实例等都已经加载了。</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">ApplicationReadyEvent</td>
<td align="center">只要SpringApplication可以接收服务请求时即调用完ApplicationRunner和CommandLineRunner的run方法后触发，此时标志SpringApplication已经正在运行，即启动成功。</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">ApplicationFailedEvent</td>
<td align="center">若SpringApplication未能成功启动时则会catch住异常发布ApplicationFailedEvent事件，标志ApplicationFailedEvent启动失败。</td>
</tr>
</tbody></table>
  </article>
  <aside class="table-content" id="site-toc">
  <div class="table-content-title">
    <i class="fa fa-arrow-right fa-lg" id="site-toc-hide-btn"></i>
    <span>目录</span>
  </div>
  <div class="table-content-main">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-SpringBoot%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BA%8B%E4%BB%B6%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-text">1.SpringBoot生命周期事件源码分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-JDK%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%9F%BA%E7%B1%BBEventObject"><span class="toc-text">1.1 JDK的事件基类EventObject</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Spring%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%9F%BA%E7%B1%BBApplicationEvent"><span class="toc-text">1.2 Spring的事件基类ApplicationEvent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-SpringBoot%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%9F%BA%E7%B1%BBSpringApplicationEvent"><span class="toc-text">1.3 SpringBoot的事件基类SpringApplicationEvent</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-SpringBoot%E5%85%B7%E4%BD%93%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BA%8B%E4%BB%B6%E7%B1%BB"><span class="toc-text">2.SpringBoot具体的生命周期事件类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-ApplicationStartingEvent"><span class="toc-text">2.1 ApplicationStartingEvent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-ApplicationEnvironmentPreparedEvent"><span class="toc-text">2.2 ApplicationEnvironmentPreparedEvent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-ApplicationContextInitializedEvent"><span class="toc-text">2.3 ApplicationContextInitializedEvent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-ApplicationPreparedEvent"><span class="toc-text">2.4 ApplicationPreparedEvent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-ApplicationStartedEvent"><span class="toc-text">2.5 ApplicationStartedEvent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-ApplicationReadyEvent"><span class="toc-text">2.6 ApplicationReadyEvent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-ApplicationFailedEvent"><span class="toc-text">2.7 ApplicationFailedEvent</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol>
  </div>
</aside>
  
    <aside class="passage-copyright">
      <div>本文作者: 听风行</div>
      
        <div>
          原文链接: 
          <a href="" target="_blank">https://blog.iyu.pub/posts/2020-11-24-SpringBoot-Source-10/</a>
        </div>
      
      <div>
        版权声明: 本博客所有文章除特别声明外, 均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议. 转载请注明出处!
      </div>
    </aside>
  
  
    <div class="passage-tags">
     
      <a href="/tags/Java/"><i class="fa fa-tags"></i>Java</a>
     
      <a href="/tags/SpringBoot/"><i class="fa fa-tags"></i>SpringBoot</a>
     
      <a href="/tags/Source/"><i class="fa fa-tags"></i>Source</a>
    
    </div>
  
</div>

    </main>
    
      
<div class="site-comment-contanier" data-plateform="leancloud">
  
    <p id="site-comment-info">
      <i class="fa fa-spinner fa-spin"></i> 评论加载中
    </p>
    <div id="site-comment"></div>
  
</div>
    
    <div class="site-footer-wrapper">
  <footer class="site-footer">
    
      
        <div class="site-footer-col">
          <h5 class="site-footer-title">友链推荐</h5>
          
            <span class="site-footer-item">
              <a href="https://www.iyu.pub" target="_blank">听风行官网</a>
            </span>
          
            <span class="site-footer-item">
              <a href="https://browser.iyu.pub" target="_blank">TingBrowser</a>
            </span>
          
            <span class="site-footer-item">
              <a href="https://www.zhyui.com" target="_blank">Timogal</a>
            </span>
          
            <span class="site-footer-item">
              <a href="http://www.sqliu.cn" target="_blank">桥帮主</a>
            </span>
          
        </div>
      
        <div class="site-footer-col">
          <h5 class="site-footer-title">服务器推荐</h5>
          
            <span class="site-footer-item">
              <a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=5e3lfzbh" target="_blank">阿里云服务器</a>
            </span>
          
            <span class="site-footer-item">
              <a href="https://cloud.tencent.com/redirect.php?redirect=1001&cps_key=4a5ddee5a29f458f6de46e4f27bc904e&from=console" target="_blank">腾讯云服务器</a>
            </span>
          
            <span class="site-footer-item">
              <a href="https://cloud.baidu.com/campaign/partner/index.html?teamCode=GC6E98UL" target="_blank">百度云服务器</a>
            </span>
          
        </div>
      
        <div class="site-footer-col">
          <h5 class="site-footer-title">社交の平台</h5>
          
            <span class="site-footer-item">
              <a href="https://twitter.com/tingfengxing" target="_blank">Twitter</a>
            </span>
          
            <span class="site-footer-item">
              <a href="https://www.facebook.com/tingfengxing" target="_blank">Facebook</a>
            </span>
          
        </div>
      
    
    <div class="site-footer-info">
      <i class="fa fa-clock-o"></i> 本站已稳定运行<span id="site-time"></span>
    </div>
    
      <div class="site-footer-info">
        <i class="fa fa-paw"></i> 您是本站第 <span id="site-count"></span> 位访客
      </div>
    
    
      <div class="site-footer-info">
        <i class="fa fa-at"></i> <a href="mailto:Email: 0@iyu.pub">Email: 0@iyu.pub
      </div>
    
    <div class="site-footer-info">
      <i class="fa fa-copyright"></i> 
      2015~2020 <a href="https://blog.iyu.pub" target="_blank">https://blog.iyu.pub</a>.
      Created by <a href="https://177.im/" target="_blank">听风行</a>.
      All rights reserved.
    </div>
  </footer>
</div>
    <div id="site-layer" style="display:none;">
  <div class="site-layer-content">
    <div class="site-layer-header">
      <span class="site-layer-header-title" id="site-layer-title"></span>
      <i class="fa fa-close" id="site-layer-close"></i>
    </div>
    <div class="site-layer-body" id="site-layer-container">
      <div class="site-layer-input" id="site-layer-search" style="display: none;">
        <div class="site-layer-input-choose">
          <a href="javascript:void(0);" title="Change Search Engine">Google</a>
        </div>
        <input type="text">
        <i class="fa fa-search"></i>
      </div>
      
        <div class="site-layer-reward" id="site-layer-reward" style="display: none;">
          
            <div>
              <img src="/images/wechat.png" alt="WeChat">
              
                <p>WeChat</p>
              
            </div>
          
            <div>
              <img src="/images/alipay.png" alt="AliPay">
              
                <p>AliPay</p>
              
            </div>
          
        </div>
      
      <div id="site-layer-welcome" style="display:none;"></div>
    </div>
  </div>
</div>
    

<div class="bottom-bar">
  <div class="bottom-bar-left">
    <a href="javascript:void(0);" data-enable="false">
      <i class="fa fa-arrow-left"></i>
    </a>
    <a href="/posts/2020-11-23-SpringBoot-Source-09/" data-enable="true">
      <i class="fa fa-arrow-right"></i>
    </a>
  </div>
  <div class="bottom-bar-right">
    <a href="javascript:void(0);" data-enable="true" id="site-toc-show-btn">
      <i class="fa fa-bars"></i>
    </a>
    
      <a href="#site-comment" data-enable="true">
        <i class="fa fa-commenting"></i>
      </a>
    
    <a href="javascript:void(0);" id="site-toggle-share-btn">
      <i class="fa fa-share-alt"></i>
    </a>
    
      <a href="javascript:void(0);" id="site-reward">
        <i class="fa fa-thumbs-up"></i>
      </a>
    
    <a href="javascript:void(0);" id="back-top-btn">
      <i class="fa fa-chevron-up"></i>
    </a>
  </div>
</div>
    <div id="share-btn">
  
    <a id="share-btn-twitter" href="javascript:void(0);" target="_blank">
      <i class="fa fa-twitter"></i>
    </a>
  
  
    <a id="share-btn-facebook" href="javascript:void(0);" target="_blank">
      <i class="fa fa-facebook"></i>
    </a>
  
  
    <a id="share-btn-weibo" href="javascript:void(0);" target="_blank">
      <i class="fa fa-weibo"></i>
    </a>
  
  
    <a id="share-btn-qq" href="javascript:void(0);" target="_blank">
      <i class="fa fa-qq"></i>
    </a>
  
  
    <a id="share-btn-wechat" href="javascript:void(0);" target="_blank">
      <i class="fa fa-wechat"></i>
    </a>
  
</div>
    
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-88629664-2"></script>
  <script async>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-88629664-2');
  </script>



  <script async>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
  </script>




    
  </body>
</html>